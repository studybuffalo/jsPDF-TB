/**
 * @file Returns the width of the string based on the provided style
 * information
 * @author Joshua Torrance <studybuffalo@gmail.com>
 * @copyright Joshua Torrance 2017
 * @license LGPL-3.0
 */

/**
 * Extends the jsPDF library to measure string widths
 * @param {string} str - The string to measure
 * @param {string} font - The desired font
 * @param {string} style - The desired style
 * @param {number} size - The desired size
 * @param {string} unit - The desired output unit
 */
jsPDF.API.getStringWidth = function calculateStringWidth(str, font, style, size, unit="mm") {
	/** Assembles a collection of objects describing character width */
	class CharRef {
		/**
		 * @param {string} character - The character
		 * @param {number} cN - The normal Courier width
		 * @param {number} cB - The bold Courier width
		 * @param {number} cI - The italic Courier width
		 * @param {number} cBI - The bold-italic Courier width
		 * @param {number} hN - The normal Helvetica width
		 * @param {number} hB - The bold Helvetica width
		 * @param {number} hI - The italic Helvetica width
		 * @param {number} hBI - The bold-italic Helvetica width
		 * @param {number} tN - The normal Times width
		 * @param {number} tB - The bold Times width
		 * @param {number} tI - The italic Times width
		 * @param {number} tBI - The bold-italic Times width
		 */
		constructor(character, c, hN, hB, hI, hBI, tN, tB, tI, tBI) {
			this.character = character;
			this.courier = c // All courier characters same width
			this.helvetica = { normal: hN, bold: hB, italic: hI, boldItalic: hBI };
			this.times = { normal: tN, bold: tB, italic: tI, boldItalic: tBI };
		}
	}

	/**  Array of all the character widths for each style */
	const charList = [
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		null,
		new CharRef(" ", 0.600, 0.278, 0.278, 0.278, 0.278, 0.250, 0.250, 0.250, 0.250),
		new CharRef("!", 0.600, 0.278, 0.333, 0.278, 0.333, 0.333, 0.333, 0.333, 0.389),
		new CharRef("\"", 0.600, 0.355, 0.474, 0.355, 0.474, 0.408, 0.555, 0.420, 0.555),
		new CharRef("#", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("$", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("%", 0.600, 0.889, 0.889, 0.889, 0.889, 0.833, 1.000, 0.833, 0.833),
		new CharRef("&", 0.600, 0.667, 0.722, 0.667, 0.722, 0.778, 0.833, 0.778, 0.778),
		new CharRef("'", 0.600, 0.191, 0.238, 0.191, 0.238, 0.180, 0.278, 0.214, 0.278),
		new CharRef("(", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef(")", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("*", 0.600, 0.389, 0.389, 0.389, 0.389, 0.500, 0.500, 0.500, 0.500),
		new CharRef("+", 0.600, 0.584, 0.584, 0.584, 0.584, 0.564, 0.570, 0.675, 0.570),
		new CharRef(",", 0.600, 0.278, 0.278, 0.278, 0.278, 0.250, 0.250, 0.250, 0.250),
		new CharRef("-", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef(".", 0.600, 0.278, 0.278, 0.278, 0.278, 0.250, 0.250, 0.250, 0.250),
		new CharRef("/", 0.600, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("0", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("1", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("2", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("3", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("4", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("5", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("6", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("7", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("8", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("9", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef(":", 0.600, 0.278, 0.333, 0.278, 0.333, 0.278, 0.333, 0.333, 0.333),
		new CharRef(";", 0.600, 0.278, 0.333, 0.278, 0.333, 0.278, 0.333, 0.333, 0.333),
		new CharRef("<", 0.600, 0.584, 0.584, 0.584, 0.584, 0.564, 0.570, 0.675, 0.570),
		new CharRef("=", 0.600, 0.584, 0.584, 0.584, 0.584, 0.564, 0.570, 0.675, 0.570),
		new CharRef(">", 0.600, 0.584, 0.584, 0.584, 0.584, 0.564, 0.570, 0.675, 0.570),
		new CharRef("?", 0.600, 0.556, 0.611, 0.556, 0.611, 0.444, 0.500, 0.500, 0.500),
		new CharRef("@", 0.600, 1.015, 0.975, 1.015, 0.975, 0.921, 0.930, 0.920, 0.832),
		new CharRef("A", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("B", 0.600, 0.667, 0.722, 0.667, 0.722, 0.667, 0.667, 0.611, 0.667),
		new CharRef("C", 0.600, 0.722, 0.722, 0.722, 0.722, 0.667, 0.722, 0.667, 0.667),
		new CharRef("D", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("E", 0.600, 0.667, 0.667, 0.667, 0.667, 0.611, 0.667, 0.611, 0.667),
		new CharRef("F", 0.600, 0.611, 0.611, 0.611, 0.611, 0.556, 0.611, 0.611, 0.667),
		new CharRef("G", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("H", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.778, 0.722, 0.778),
		new CharRef("I", 0.600, 0.278, 0.278, 0.278, 0.278, 0.333, 0.389, 0.333, 0.389),
		new CharRef("J", 0.600, 0.500, 0.556, 0.500, 0.556, 0.389, 0.500, 0.444, 0.500),
		new CharRef("K", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.778, 0.667, 0.667),
		new CharRef("L", 0.600, 0.556, 0.611, 0.556, 0.611, 0.611, 0.667, 0.556, 0.611),
		new CharRef("M", 0.600, 0.833, 0.833, 0.833, 0.833, 0.889, 0.944, 0.833, 0.889),
		new CharRef("N", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.667, 0.722),
		new CharRef("O", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("P", 0.600, 0.667, 0.667, 0.667, 0.667, 0.556, 0.611, 0.611, 0.611),
		new CharRef("Q", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("R", 0.600, 0.722, 0.722, 0.722, 0.722, 0.667, 0.722, 0.611, 0.667),
		new CharRef("S", 0.600, 0.667, 0.667, 0.667, 0.667, 0.556, 0.556, 0.500, 0.556),
		new CharRef("T", 0.600, 0.611, 0.611, 0.611, 0.611, 0.611, 0.667, 0.556, 0.611),
		new CharRef("U", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("V", 0.600, 0.667, 0.667, 0.667, 0.667, 0.722, 0.722, 0.611, 0.667),
		new CharRef("W", 0.600, 0.944, 0.944, 0.944, 0.944, 0.944, 1.000, 0.833, 0.889),
		new CharRef("X", 0.600, 0.667, 0.667, 0.667, 0.667, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Y", 0.600, 0.667, 0.667, 0.667, 0.667, 0.722, 0.722, 0.556, 0.611),
		new CharRef("Z", 0.600, 0.611, 0.611, 0.611, 0.611, 0.611, 0.667, 0.556, 0.611),
		new CharRef("[", 0.600, 0.278, 0.333, 0.278, 0.333, 0.333, 0.333, 0.389, 0.333),
		new CharRef("\\", 0.600, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("]", 0.600, 0.278, 0.333, 0.278, 0.333, 0.333, 0.333, 0.389, 0.333),
		new CharRef("^", 0.600, 0.469, 0.584, 0.469, 0.584, 0.469, 0.581, 0.422, 0.570),
		new CharRef("_", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("`", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("a", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("b", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.500),
		new CharRef("c", 0.600, 0.500, 0.556, 0.500, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("d", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.500),
		new CharRef("e", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("f", 0.600, 0.278, 0.333, 0.278, 0.333, 0.333, 0.333, 0.278, 0.333),
		new CharRef("g", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("h", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("i", 0.600, 0.222, 0.278, 0.222, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("j", 0.600, 0.222, 0.278, 0.222, 0.278, 0.278, 0.333, 0.278, 0.278),
		new CharRef("k", 0.600, 0.500, 0.556, 0.500, 0.556, 0.500, 0.556, 0.444, 0.500),
		new CharRef("l", 0.600, 0.222, 0.278, 0.222, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("m", 0.600, 0.833, 0.889, 0.833, 0.889, 0.778, 0.833, 0.722, 0.778),
		new CharRef("n", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("o", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("p", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.500),
		new CharRef("q", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.500),
		new CharRef("r", 0.600, 0.333, 0.389, 0.333, 0.389, 0.333, 0.444, 0.389, 0.389),
		new CharRef("s", 0.600, 0.500, 0.556, 0.500, 0.556, 0.389, 0.389, 0.389, 0.389),
		new CharRef("t", 0.600, 0.278, 0.333, 0.278, 0.333, 0.278, 0.333, 0.278, 0.278),
		new CharRef("u", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("v", 0.600, 0.500, 0.556, 0.500, 0.556, 0.500, 0.500, 0.444, 0.444),
		new CharRef("w", 0.600, 0.722, 0.778, 0.722, 0.778, 0.722, 0.722, 0.667, 0.667),
		new CharRef("x", 0.600, 0.500, 0.556, 0.500, 0.556, 0.500, 0.500, 0.444, 0.500),
		new CharRef("y", 0.600, 0.500, 0.556, 0.500, 0.556, 0.500, 0.500, 0.444, 0.444),
		new CharRef("z", 0.600, 0.500, 0.500, 0.500, 0.500, 0.444, 0.444, 0.389, 0.389),
		new CharRef("{", 0.600, 0.334, 0.389, 0.334, 0.389, 0.480, 0.394, 0.400, 0.348),
		new CharRef("|", 0.600, 0.260, 0.280, 0.260, 0.280, 0.200, 0.220, 0.275, 0.220),
		new CharRef("}", 0.600, 0.334, 0.389, 0.334, 0.389, 0.480, 0.394, 0.400, 0.348),
		new CharRef("~", 0.600, 0.584, 0.584, 0.584, 0.584, 0.541, 0.520, 0.541, 0.570),
		null,
		new CharRef("€", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		null,
		new CharRef("‚", 0.600, 0.222, 0.278, 0.222, 0.278, 0.333, 0.333, 0.333, 0.333),
		new CharRef("ƒ", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("„", 0.600, 0.333, 0.500, 0.333, 0.500, 0.444, 0.500, 0.556, 0.500),
		new CharRef("…", 0.600, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 0.889, 1.000),
		new CharRef("†", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("‡", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("ˆ", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("‰", 0.600, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000),
		new CharRef("Š", 0.600, 0.667, 0.667, 0.667, 0.667, 0.556, 0.556, 0.500, 0.556),
		new CharRef("‹", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("Œ", 0.600, 1.000, 1.000, 1.000, 1.000, 0.889, 1.000, 0.944, 0.944),
		null,
		new CharRef("Ž", 0.600, 0.611, 0.611, 0.611, 0.611, 0.611, 0.667, 0.556, 0.611),
		null,
		null,
		new CharRef("‘", 0.600, 0.222, 0.278, 0.222, 0.278, 0.333, 0.333, 0.333, 0.333),
		new CharRef("’", 0.600, 0.222, 0.278, 0.222, 0.278, 0.333, 0.333, 0.333, 0.333),
		new CharRef("“", 0.600, 0.333, 0.500, 0.333, 0.500, 0.444, 0.500, 0.556, 0.500),
		new CharRef("”", 0.600, 0.333, 0.500, 0.333, 0.500, 0.444, 0.500, 0.556, 0.500),
		new CharRef("•", 0.600, 0.350, 0.350, 0.350, 0.350, 0.350, 0.350, 0.350, 0.350),
		new CharRef("–", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("—", 0.600, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 0.889, 1.000),
		new CharRef("˜", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("™", 0.600, 1.000, 1.000, 1.000, 1.000, 0.980, 1.000, 0.980, 1.000),
		new CharRef("š", 0.600, 0.500, 0.556, 0.500, 0.556, 0.389, 0.389, 0.389, 0.389),
		new CharRef("›", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("œ", 0.600, 0.944, 0.944, 0.944, 0.944, 0.722, 0.722, 0.667, 0.722),
		null,
		new CharRef("ž", 0.600, 0.500, 0.500, 0.500, 0.500, 0.444, 0.444, 0.389, 0.389),
		new CharRef("Ÿ", 0.600, 0.667, 0.667, 0.667, 0.667, 0.722, 0.722, 0.556, 0.611),
		new CharRef(" ", 0.600, 0.278, 0.278, 0.278, 0.278, 0.250, 0.250, 0.250, 0.250),
		new CharRef("¡", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.389, 0.389),
		new CharRef("¢", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("£", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("¤", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("¥", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("¦", 0.600, 0.260, 0.280, 0.260, 0.280, 0.200, 0.220, 0.275, 0.220),
		new CharRef("§", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("¨", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("©", 0.600, 0.737, 0.737, 0.737, 0.737, 0.760, 0.747, 0.760, 0.747),
		new CharRef("ª", 0.600, 0.370, 0.370, 0.370, 0.370, 0.276, 0.300, 0.276, 0.266),
		new CharRef("«", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("¬", 0.600, 0.584, 0.584, 0.584, 0.584, 0.564, 0.570, 0.675, 0.606),
		new CharRef("-", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("®", 0.600, 0.737, 0.737, 0.737, 0.737, 0.760, 0.747, 0.760, 0.747),
		new CharRef("¯", 0.600, 0.552, 0.552, 0.552, 0.552, 0.500, 0.500, 0.500, 0.500),
		new CharRef("°", 0.600, 0.400, 0.400, 0.400, 0.400, 0.400, 0.400, 0.400, 0.400),
		new CharRef("±", 0.600, 0.549, 0.549, 0.549, 0.549, 0.549, 0.549, 0.549, 0.549),
		new CharRef("²", 0.600, 0.333, 0.333, 0.333, 0.333, 0.300, 0.300, 0.300, 0.300),
		new CharRef("³", 0.600, 0.333, 0.333, 0.333, 0.333, 0.300, 0.300, 0.300, 0.300),
		new CharRef("´", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("µ", 0.600, 0.576, 0.576, 0.576, 0.576, 0.576, 0.576, 0.576, 0.576),
		new CharRef("¶", 0.600, 0.537, 0.556, 0.537, 0.556, 0.453, 0.540, 0.523, 0.500),
		new CharRef("·", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.250, 0.250),
		new CharRef("¸", 0.600, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333, 0.333),
		new CharRef("¹", 0.600, 0.333, 0.333, 0.333, 0.333, 0.300, 0.300, 0.300, 0.300),
		new CharRef("º", 0.600, 0.365, 0.365, 0.365, 0.365, 0.310, 0.330, 0.310, 0.300),
		new CharRef("»", 0.600, 0.556, 0.556, 0.556, 0.556, 0.500, 0.500, 0.500, 0.500),
		new CharRef("¼", 0.600, 0.834, 0.834, 0.834, 0.834, 0.750, 0.750, 0.750, 0.750),
		new CharRef("½", 0.600, 0.834, 0.834, 0.834, 0.834, 0.750, 0.750, 0.750, 0.750),
		new CharRef("¾", 0.600, 0.834, 0.834, 0.834, 0.834, 0.750, 0.750, 0.750, 0.750),
		new CharRef("¿", 0.600, 0.611, 0.611, 0.611, 0.611, 0.444, 0.500, 0.500, 0.500),
		new CharRef("À", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Á", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Â", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Ã", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Ä", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Å", 0.600, 0.667, 0.722, 0.667, 0.722, 0.722, 0.722, 0.611, 0.667),
		new CharRef("Æ", 0.600, 1.000, 1.000, 1.000, 1.000, 0.889, 1.000, 0.889, 0.944),
		new CharRef("Ç", 0.600, 0.722, 0.722, 0.722, 0.722, 0.667, 0.722, 0.667, 0.667),
		new CharRef("È", 0.600, 0.667, 0.667, 0.667, 0.667, 0.611, 0.667, 0.611, 0.667),
		new CharRef("É", 0.600, 0.667, 0.667, 0.667, 0.667, 0.611, 0.667, 0.611, 0.667),
		new CharRef("Ê", 0.600, 0.667, 0.667, 0.667, 0.667, 0.611, 0.667, 0.611, 0.667),
		new CharRef("Ë", 0.600, 0.667, 0.667, 0.667, 0.667, 0.611, 0.667, 0.611, 0.667),
		new CharRef("Ì", 0.600, 0.278, 0.278, 0.278, 0.278, 0.333, 0.389, 0.333, 0.389),
		new CharRef("Í", 0.600, 0.278, 0.278, 0.278, 0.278, 0.333, 0.389, 0.333, 0.389),
		new CharRef("Î", 0.600, 0.278, 0.278, 0.278, 0.278, 0.333, 0.389, 0.333, 0.389),
		new CharRef("Ï", 0.600, 0.278, 0.278, 0.278, 0.278, 0.333, 0.389, 0.333, 0.389),
		new CharRef("Ð", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("Ñ", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.667, 0.722),
		new CharRef("Ò", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("Ó", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("Ô", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("Õ", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("Ö", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("×", 0.600, 0.584, 0.584, 0.584, 0.584, 0.564, 0.570, 0.675, 0.570),
		new CharRef("Ø", 0.600, 0.778, 0.778, 0.778, 0.778, 0.722, 0.778, 0.722, 0.722),
		new CharRef("Ù", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("Ú", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("Û", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("Ü", 0.600, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722, 0.722),
		new CharRef("Ý", 0.600, 0.667, 0.667, 0.667, 0.667, 0.722, 0.722, 0.556, 0.611),
		new CharRef("Þ", 0.600, 0.667, 0.667, 0.667, 0.667, 0.556, 0.611, 0.611, 0.611),
		new CharRef("ß", 0.600, 0.611, 0.611, 0.611, 0.611, 0.500, 0.556, 0.500, 0.500),
		new CharRef("à", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("á", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("â", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("ã", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("ä", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("å", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.500, 0.500, 0.500),
		new CharRef("æ", 0.600, 0.889, 0.889, 0.889, 0.889, 0.667, 0.722, 0.667, 0.722),
		new CharRef("ç", 0.600, 0.500, 0.556, 0.500, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("è", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("é", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("ê", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("ë", 0.600, 0.556, 0.556, 0.556, 0.556, 0.444, 0.444, 0.444, 0.444),
		new CharRef("ì", 0.600, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("í", 0.600, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("î", 0.600, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("ï", 0.600, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278, 0.278),
		new CharRef("ð", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("ñ", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("ò", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("ó", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("ô", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("õ", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("ö", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("÷", 0.600, 0.549, 0.549, 0.549, 0.549, 0.549, 0.549, 0.549, 0.549),
		new CharRef("ø", 0.600, 0.611, 0.611, 0.611, 0.611, 0.500, 0.500, 0.500, 0.500),
		new CharRef("ù", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("ú", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("û", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("ü", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.556),
		new CharRef("ý", 0.600, 0.500, 0.556, 0.500, 0.556, 0.500, 0.500, 0.444, 0.444),
		new CharRef("þ", 0.600, 0.556, 0.611, 0.556, 0.611, 0.500, 0.556, 0.500, 0.500),
		new CharRef("ÿ", 0.600, 0.500, 0.556, 0.500, 0.556, 0.500, 0.500, 0.444, 0.444)
	];
	
	/**
	 * Sum widths of each character in the string
	 * @param {string} character - The character to measure
	 * @param {string} font - The desired font (default: helvetica)
	 * @param {string} style - The desired style (default: normal)
	 * @param {number} size - The desired size (default: 12)
	 * @return {number} fontWidth - The width of the provided character
	 */
	const charWidth = function getCharWidth(
		character,
		font = "helvetica",
		style = "normal",
		size = 12,
	) {
		// Over-estimate to ensure proper fit
		let width = 1;

		// Get current character width in the noted font size and style
		const charCode = character.charCodeAt(0);

		if (charCode >= 32 && charCode <= 255 && charList[charCode]) {
			if (font === "helvetica") {
				switch (style) {
					case "normal": {
						width = charList[charCode].helvetica.normal;
						break;
					}
					case "bold": {
						width = charList[charCode].helvetica.bold;
						break;
					}
					case "italic": {
						width = charList[charCode].helvetica.italic;
						break;
					}
					case "bolditalic": {
						width = charList[charCode].helvetica.bolditalic;
						break;
					}
				}
			} else if (font === "times") {
				switch (style) {
					case "normal": {
						width = charList[charCode].times.normal;
						break;
					}
					case "bold": {
						width = charList[charCode].times.bold;
						break;
					}
					case "italic": {
						width = charList[charCode].times.italic;
						break;
					}
					case "bolditalic": {
						width = charList[charCode].times.bolditalic;
						break;
					}
				}
			} else if (font === "courier") {
				width = charList[charCode].courier;
			}
		} else {
			console.warn(`Character code ${charCode} out of range`)
		}
		
		// Correct size for font
		const fontWidth = width * size;
		
		return fontWidth;
	}

	/**
	 * Converts the provided width to the desired output unit
	 * @param {number} width - The width to convert
	 * @param {string} unit - The unit to convert to
	 */
	const unitOutput = function convertToOutputUnit(width, unit) {
		const ptPerInch = 72;
		const mmPerInch = 25.4;
		let convWidth = 0;
		let roundWidth = 0;

		switch (unit) {
			case "mm": {
				convWidth = width * mmPerInch / ptPerInch;
				roundWidth = Math.round(convWidth * 1e2) / 1e2;
				break;
			}
			case "pt": {
				roundWidth = width;
				break;
			}
			case "cm": {
				convWidth = width * mmPerInch / ptPerInch / 10;
				roundWidth = Math.round(convWidth * 1e3) / 1e3;
				break;
			}
			case "in": {
				convWidth = width / ptPerInch;
				roundWidth = Math.round(convWidth * 1e3) / 1e3;
				break;
			}
		}

		return roundWidth;
	}

	// Measure each character and add to total width
	let stringWidth = 0;
	const length = str.length;

	for (let i = 0; i < length; i += 1) {
		stringWidth += charWidth(str.charAt(i), font, style, size);
	}
	
	// Round to nearest thousandth (smallest font measurement)
	let roundedWidth = Math.round(stringWidth * 1e3) / 1e3;

	// Convert to the desired output unit
	let convertedUnit = unitOutput(roundedWidth, unit);

	return stringWidth;
}